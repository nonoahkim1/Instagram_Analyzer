<!doctype html>
<html>

  <head>
    <title>Micro 05</title>
    <style>
      .box {
        width: 100px;
        height: 100px;
        float: left;
        margin: 20px;
      }
      #spinningBox {
        width: 80px;
        height: 80px;
        background-color: yellow;
        border: 5px solid black;
        margin: 20px;
      }
      @keyframes rotation {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
    <h1>Micro 05</h1>
  <body>
    <form>
      <button id="add">Add box to page in 1 second</button>
      <button id="spinLeft">Spin Left</button>
      <button id="spinRight">Spin Right</button>
      <button id="stop">Stop</button>
    </form>

    <div id="spinningBox"></div>
    <div id="boxes"><div>
  </body>

  <script>
    let add = document.getElementById("add");
    let spinLeft = document.getElementById("spinLeft");
    let spinRight = document.getElementById("spinRight");
    let stop = document.getElementById("stop");
    let boxes = document.getElementById("boxes");
    let spinningBox = document.getElementById("spinningBox");
    let angle = 0;
    let controlLeft, controlRight;
    let direction;
    let spinning = false;

    add.onclick = function(event) {
      //prevent refresh
      event.preventDefault();
      //make div appear 1 second after button click
      setTimeout(createDiv, 1000);
    }

    spinLeft.onclick = function(event) {
      //prevent refresh
      event.preventDefault();
      //start interval if not spinning
      if (spinning == false) {
        spinning = true;
        direction = "left";
        controlLeft = setInterval (rotateLeft, 10);
      }
    }

    spinRight.onclick = function(event) {
      //prevent refresh
      event.preventDefault();
      //start interval if not spinning
      if (spinning == false) {
        spinning = true;
        direction = "right";
        controlRight = setInterval (rotateRight, 10);
      }
    }

    stop.onclick = function(event) {
      //prevent refresh
      event.preventDefault();

      spinning = false;
      //clear interval
      if (direction == "left") {
        clearInterval (controlLeft);
      }
      else if (direction == "right") {
        clearInterval (controlRight);
      }
    }

    function createDiv() {
      //create div to add
      let tempBox = document.createElement('div');
      //generate random rgb values
      let r = Math.floor(Math.random() * 256);
      let g = Math.floor(Math.random() * 256);
      let b = Math.floor(Math.random() * 256);
      //apply class to div
      tempBox.classList.add("box");
      //style rbg to div
      tempBox.style.backgroundColor  = `rgb(${r},${g},${b})`;
      // add div
      boxes.appendChild(tempBox);
    }

    function rotateLeft() {
      //style rotation
      spinningBox.style.transform = `rotate(${angle}deg)`;
      //decrement angle variable
      angle -= 1;
      //adjust angle range
      if (angle <= -360) {
        angle += 360;
      }
    }

    function rotateRight() {
      //style rotation
      spinningBox.style.transform = `rotate(${angle}deg)`;
      //increment angle variable
      angle += 1;
      //adjust angle range
      if (angle >= 360) {
        angle -= 360;
      }
    }

  </script>
</html>
